<!DOCTYPE html>
<html lang="en">

<head>
  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A portfolio and blog for Rowan, a developer, artist, and musician.">
    <meta name="keywords" content="Unity, Bevy, JavaScript, Rust, C#, HTML, CSS, Game Development, Programming, Music, Art">
    <meta name="author" content="Rowan">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>
  
    Kitsune Cafe
  
  </title>
    <link rel="preload" href="/fonts/sintony/Sintony-Regular.ttf" as="font" type="font/ttf">
    <link rel="preload" href="/fonts/raleway/Raleway-VariableFont_wght.ttf" as="font" type="font/ttf">
    <link rel="preload" href="/fonts/fira-code/FiraCode-VariableFont_wght.ttf" as="font" type="font/ttf">
    <link rel="stylesheet" href="/css/style.css">
  
</head>

<body>
    <div class="full-width center flex column">
      <div class="main-container flex column full-width has-half-gap">
        <nav class="center-horizontally flex row center-text space-evenly has-border-bottom has-quarter-padding has-bg has-shadow">
  <div><a href="/">Home</a></div>
  <div><a href="/blog">Blog</a></div>
  <div><a href="/projects">Projects</a></div>
</nav>


        
<main class="flex column has-border-radius has-padding has-bg has-shadow">
      
<h1>Convenient Unity Attributes</h1>
<p>Unity offers a range of convenient ways to manipulate and hack its inspector. Unfortunately, thanks to the size of Unity's documentation, these types of methods go unnoticed.</p>
<p>I won't attempt to iterate every useful attribute in Unity's library. I encourage you to explore Unity's documentation.</p>
<h1>Header</h1>
<p><a href="https://docs.unity3d.com/2022.1/Documentation/ScriptReference/HeaderAttribute.html">Documentation</a></p>
<p>This simple and effective attribute will display a header above the property to which it is applied.</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Movement </span><span style="color:#eff1f5;">: </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">	[</span><span style="color:#bf616a;">Header</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">"</span><span style="color:#a3be8c;">Configuration</span><span style="color:#c0c5ce;">"</span><span style="color:#eff1f5;">)]
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public float </span><span style="color:#bf616a;">MaxSpeed </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">5</span><span style="color:#b48ead;">f</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public float </span><span style="color:#bf616a;">MaxAcceleration </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">5</span><span style="color:#b48ead;">f</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">	[</span><span style="color:#bf616a;">Header</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">"</span><span style="color:#a3be8c;">Dependencies</span><span style="color:#c0c5ce;">"</span><span style="color:#eff1f5;">)]
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public </span><span style="color:#eff1f5;">Rigidbody </span><span style="color:#bf616a;">body</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public </span><span style="color:#eff1f5;">Camera </span><span style="color:#bf616a;">cam</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">}</span></pre>
<p><img src="./header-example.png" alt="Example of the inspector" /></p>
<h1>Space</h1>
<p><a href="https://docs.unity3d.com/2022.1/Documentation/ScriptReference/SpaceAttribute.html">Documentation</a></p>
<p>The <code>Space</code> attribute adds user-defined pixel spacing between fields. I don't often reach for this attribute, but it can be handy in cases where a <code>Header</code> isn't appropriate. It helps designers scan through fields by creating a small visual break.</p>
<p>Unity's documentation illustrates a good use case (with some modifications).</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Example </span><span style="color:#eff1f5;">: </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">    [</span><span style="color:#bf616a;">SerializeField</span><span style="color:#eff1f5;">] </span><span style="color:#b48ead;">private int </span><span style="color:#bf616a;">health </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">    [</span><span style="color:#bf616a;">SerializeField</span><span style="color:#eff1f5;">] </span><span style="color:#b48ead;">private int </span><span style="color:#bf616a;">maxHealth </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">100</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    [</span><span style="color:#bf616a;">Space</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">10</span><span style="color:#eff1f5;">)] </span><span style="color:#65737e;">// 10 pixels of spacing here.
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    [</span><span style="color:#bf616a;">SerializeField</span><span style="color:#eff1f5;">] </span><span style="color:#b48ead;">private int </span><span style="color:#bf616a;">shield </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">    [</span><span style="color:#bf616a;">SerializeField</span><span style="color:#eff1f5;">] </span><span style="color:#b48ead;">private int </span><span style="color:#bf616a;">maxShield </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">}</span></pre>
<p>A 10-pixel space is between <code>maxHealth</code> and <code>shield</code>.</p>
<p><img src="./space-example.png" alt="Screenshot of example component" /></p>
<h1>Tooltip</h1>
<p><a href="https://docs.unity3d.com/2022.1/Documentation/ScriptReference/TooltipAttribute.html">Documentation</a></p>
<p>Unsurprisingly, the <code>Tooltip</code> attribute creates a tooltip over a field when hovered. The use case for these types of in-engine documentation is nearly endless: providing context, usage hints, and so much more.</p>
<p>I won't use Unity's example because <code>Range</code> is better suited for that use case. We'll cover that attribute next.</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Movement </span><span style="color:#eff1f5;">: </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">	[</span><span style="color:#bf616a;">SerializeField</span><span style="color:#eff1f5;">]
</span><span style="color:#eff1f5;">	[</span><span style="color:#bf616a;">Tooltip</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">"</span><span style="color:#a3be8c;">Measured in meter/sec</span><span style="color:#c0c5ce;">"</span><span style="color:#eff1f5;">)]
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">private float </span><span style="color:#bf616a;">MaxSpeed </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">5</span><span style="color:#b48ead;">f</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">}</span></pre>
<p><img src="./tooltip-example.png" alt="Example of tooltip attribute" /></p>
<p>Although in this particular case, I may suggest a custom attribute that appends "m/s" to the end of the field, a tooltip can provide this type of clarity and context.</p>
<h1>Range</h1>
<p><a href="https://docs.unity3d.com/2022.1/Documentation/ScriptReference/RangeAttribute.html">Documentation</a></p>
<p>We'll revisit Unity's <code>Tooltip</code> example with a different attribute: <code>Range</code>. </p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Example </span><span style="color:#eff1f5;">: </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">    [</span><span style="color:#bf616a;">Tooltip</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">"</span><span style="color:#a3be8c;">Health value between 0 and 100.</span><span style="color:#c0c5ce;">"</span><span style="color:#eff1f5;">)]
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">int </span><span style="color:#bf616a;">health </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">}</span></pre>
<p>This component wants to restrict <code>health</code> between 0 and 100. Rather than enforcing that restriction through code, it relies on the designer to abide by this restriction. Let's correct it using <code>Range</code>.</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Example </span><span style="color:#eff1f5;">: </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">    [</span><span style="color:#bf616a;">SerializeField</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">Range</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">, </span><span style="color:#d08770;">100</span><span style="color:#eff1f5;">)]
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private int </span><span style="color:#bf616a;">health </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">}</span></pre>
<p><img src="./range-example.png" alt="Example of Range attribute" /></p>
<p>The inspector is now enforcing the restriction and displaying it as a slider between the two values. I find this helps reason about the range better than a number field.</p>
<h1>SerializeField</h1>
<p><a href="https://docs.unity3d.com/2022.1/Documentation/ScriptReference/SerializeField.html">Documentation</a></p>
<p>Of all the attributes offered by Unity, this one sees the most use in my code. This attribute forces Unity's inspector to serialize and display the field in the inspector <em>regardless of accessibility</em>. This pattern is particularly effective for exposing values in the inspector while keeping them inaccessible to the codebase.</p>
<p>Consider this simple example.</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Health</span><span style="color:#eff1f5;">:  </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public int </span><span style="color:#bf616a;">Health </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">5</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public </span><span style="color:#eff1f5;">UnityEvent </span><span style="color:#bf616a;">Damaged</span><span style="color:#eff1f5;">;	
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">TakeDamage</span><span style="color:#eff1f5;">(</span><span style="color:#b48ead;">int </span><span style="color:#bf616a;">damage</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">	{
</span><span style="color:#eff1f5;">		</span><span style="color:#b48ead;">if </span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">damage </span><span style="color:#c0c5ce;">&gt; </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">		{
</span><span style="color:#eff1f5;">			</span><span style="color:#bf616a;">Damaged</span><span style="color:#eff1f5;">?.</span><span style="color:#8fa1b3;">Invoke</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">			</span><span style="color:#bf616a;">Health </span><span style="color:#c0c5ce;">= </span><span style="color:#bf616a;">Mathf</span><span style="color:#eff1f5;">.</span><span style="color:#8fa1b3;">Max</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">Health </span><span style="color:#c0c5ce;">- </span><span style="color:#bf616a;">damage</span><span style="color:#eff1f5;">, </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">		}
</span><span style="color:#eff1f5;">	}
</span><span style="color:#eff1f5;">}</span></pre>
<p>Setting <code>Health</code> to <code>public</code> allows a designer to set the initial health and tweak it during gameplay. These types of considerations are great for playtesting and debugging. Unfortunately, <em>anything</em> can modify <code>Health</code> without calling <code>TakeDamage(int)</code> which, can introduce an undesirable side effect: the <code>Damaged</code> event won't fire.</p>
<p>It's possible to mitigate this issue by using a C# property.</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Health </span><span style="color:#eff1f5;">:  </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">private int </span><span style="color:#bf616a;">health </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">5</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public int </span><span style="color:#bf616a;">Health
</span><span style="color:#eff1f5;">	{
</span><span style="color:#eff1f5;">		</span><span style="color:#b48ead;">get =&gt; </span><span style="color:#bf616a;">health</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">		</span><span style="color:#b48ead;">set
</span><span style="color:#eff1f5;">		{
</span><span style="color:#eff1f5;">			</span><span style="color:#b48ead;">if </span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">value </span><span style="color:#c0c5ce;">&lt; </span><span style="color:#bf616a;">health</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">			{
</span><span style="color:#eff1f5;">				</span><span style="color:#bf616a;">Damaged</span><span style="color:#eff1f5;">?.</span><span style="color:#8fa1b3;">Invoke</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">			}
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">			</span><span style="color:#bf616a;">health </span><span style="color:#c0c5ce;">= </span><span style="color:#bf616a;">value</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">		}
</span><span style="color:#eff1f5;">	}
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public </span><span style="color:#eff1f5;">UnityEvent </span><span style="color:#bf616a;">Damaged</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">}</span></pre>
<p>It's now impossible to modify <code>Health</code> without firing <code>Damaged</code>. However, by default, Unity does <strong>not</strong> render C# properties in the inspector. A designer wanting to set the initial health or tweak the health value during playtesting will be unable. Let's try using <code>SerializeField</code> instead.</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Health </span><span style="color:#eff1f5;">:  </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">	[</span><span style="color:#bf616a;">SerializeField</span><span style="color:#eff1f5;">] </span><span style="color:#b48ead;">private int </span><span style="color:#bf616a;">health </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">5</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public </span><span style="color:#eff1f5;">UnityEvent </span><span style="color:#bf616a;">Damaged</span><span style="color:#eff1f5;">;	
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">TakeDamage</span><span style="color:#eff1f5;">(</span><span style="color:#b48ead;">int </span><span style="color:#bf616a;">damage</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">	{
</span><span style="color:#eff1f5;">		</span><span style="color:#b48ead;">if </span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">damage </span><span style="color:#c0c5ce;">&gt; </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">		{
</span><span style="color:#eff1f5;">			</span><span style="color:#bf616a;">Damaged</span><span style="color:#eff1f5;">?.</span><span style="color:#8fa1b3;">Invoke</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">			</span><span style="color:#bf616a;">health </span><span style="color:#c0c5ce;">= </span><span style="color:#bf616a;">Mathf</span><span style="color:#eff1f5;">.</span><span style="color:#8fa1b3;">Max</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">health </span><span style="color:#c0c5ce;">- </span><span style="color:#bf616a;">damage</span><span style="color:#eff1f5;">, </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">		}
</span><span style="color:#eff1f5;">	}
</span><span style="color:#eff1f5;">}</span></pre>
<p>`</p>
<p><code>health</code> will be editable in the inspector, but only <code>TakeDamage</code> will be accessible to code. It's also possible to combine the <code>property</code> and <code>SerializeField</code> approaches by exposing a private backing field to the inspector.</p>
<h1>HideInInspector</h1>
<p><a href="https://docs.unity3d.com/2022.1/Documentation/ScriptReference/HideInInspector.html">Documentation</a></p>
<p>This attribute acts as the reverse of <code>SerializeField</code>: this will hide a <code>public</code> field from the inspector. It is helpful for hiding complexities from a designer without rendering it inaccessible to the rest of the code.</p>
<p>Let's hide some component dependencies without making them inaccessible.</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">[</span><span style="color:#bf616a;">RequireComponent</span><span style="color:#c0c5ce;">(typeof(Rigidbody), typeof(CapsuleCollider))]
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Movement </span><span style="color:#eff1f5;">: </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">	[</span><span style="color:#bf616a;">HideInInspector</span><span style="color:#eff1f5;">] </span><span style="color:#b48ead;">public </span><span style="color:#eff1f5;">Rigidbody </span><span style="color:#bf616a;">Body</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">	[</span><span style="color:#bf616a;">HideInInspector</span><span style="color:#eff1f5;">] </span><span style="color:#b48ead;">public </span><span style="color:#eff1f5;">CapsuleCollider </span><span style="color:#bf616a;">Collider</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">private void </span><span style="color:#8fa1b3;">Start</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">	{
</span><span style="color:#eff1f5;">		</span><span style="color:#bf616a;">Body </span><span style="color:#c0c5ce;">= </span><span style="color:#8fa1b3;">GetComponent</span><span style="color:#eff1f5;">&lt;Rigidbody&gt;();
</span><span style="color:#eff1f5;">		</span><span style="color:#bf616a;">Collider </span><span style="color:#c0c5ce;">= </span><span style="color:#8fa1b3;">GetComponent</span><span style="color:#eff1f5;">&lt;CapsuleCollider&gt;();
</span><span style="color:#eff1f5;">	}
</span><span style="color:#eff1f5;">}</span></pre>
<p><img src="./hideininspector-example.png" alt="Example of HideInInspector attribute" /></p>
<h1>RequireComponent</h1>
<p><a href="https://docs.unity3d.com/2022.1/Documentation/ScriptReference/RequireComponent.html">Documentation</a></p>
<p>This attribute doesn't neatly fit into this list, although I'm sure it's important enough to discuss. <code>RequireComponent</code> ensures that the specified component is attached to a GameObject. It's great for wrapping/enhancing built-in components or just assuring the existence of a dependency.</p>
<p><code>RequireComponent</code> will automatically add any required components which are missing. It will also prevent removing them while using the inspector. It's added to the <code>MonoBehaviour</code> rather than a field.</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">[</span><span style="color:#bf616a;">RequireComponent</span><span style="color:#c0c5ce;">(typeof(Rigidbody))]
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">Movement </span><span style="color:#eff1f5;">: </span><span style="color:#a3be8c;">MonoBehaviour
</span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">private </span><span style="color:#eff1f5;">Rigidbody </span><span style="color:#bf616a;">body</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">	</span><span style="color:#b48ead;">private void </span><span style="color:#8fa1b3;">Start</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">	{
</span><span style="color:#eff1f5;">		</span><span style="color:#bf616a;">body </span><span style="color:#c0c5ce;">= </span><span style="color:#8fa1b3;">GetComponent</span><span style="color:#eff1f5;">&lt;Rigidbody&gt;();
</span><span style="color:#eff1f5;">	}
</span><span style="color:#eff1f5;">}</span></pre>
<p>Unity adds a <code>Rigidbody</code> if it doesn't already exist on the GameObject. Attempting to remove <code>Rigidbody</code> will cause an error.</p>
<p><img src="./remove-requiredcomponent.png" alt="Screenshot of the error message" /></p>

</main>

      </div>
      <footer class="has-padding center">
        
        &copy; 2024 Kitsune Cafe - Made with <a href="https://github.com/kitsunecafe/roxy">Roxy</a>
        
      </footer>
    </div>
</body>

</html>

